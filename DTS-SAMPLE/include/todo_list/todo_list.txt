【DONE】可以弄个热更新机制
【DONE】gametype=0改为经典模式，不允许用卡片；用卡片的模式改为gametype=4扮演模式。gametype=0或4的情况下每局结束时获胜者有1次机会决定下一场是什么模式。如果没获胜者或者不决定，则随机。
【DONE】有时聊天频道会错乱
【DONE】未命中和睡眠静养时也可以获得怒气
【DONE】博士对SCP时视为250级；虚子改成开局选2称号；红暮改50%概率
【DONE】虚子强袭削弱；雷锋改B
【DONE】等级*100和爆熟*8取一个较大值作为下雷阈值，低于这个阈值无法全伤。也即：你既可以达到等级8来使用阔剑，也可以达到爆熟100来使用阔剑
【DONE】有时不显示禁区消息的BUG——最后发现是$areawarn没有重置的锅
【DONE】抽卡系统重新整理，乱得我都看不下去了——整理是整理了，但是感觉应该重做更好
【DONE】gameover改成能利用player_pool的
【DONE】房间有时成就和积分不正常的BUG
【DONE】应该搞一个战斗流程可视化的东西（用公式曲线救国）
【DONE】在strike_finish()里加伤害的技能都得改到apply_total_damage_modifier_down()或者apply_total_damage_modifier_up()里面去（伤害系统全部正规化了）
【DONE】添加一个站内信系统用于收成就和卡片，不然搞不清有时拿不到卡片的BUG究竟发生在什么地方
【DONE】站内信找回功能（用切糕）
【DONE】站内信删除加个确认界面
【DONE】卡片页面加获得方式提示，剩余充能时间简化
【DONE】教程模式最后高亮提示吃补给，结束后自动退出房间
【DONE】站内信可以单击查收单条消息的附件
【DONE】导航栏做新消息提示
<12!{V}5()]\[

45[_]/23


--有时刷两次禁区的BUG，不过可能已经解决
--界面效果单独拎出来做一个js
--气泡和发光按钮模块取消掉，用css改写
--把数据迁移功能加入install
--感觉sys模块的init()里面不应该放房间和gameinfo的判定，会不得不在每次调用common.inc.php时读两遍game表，有性能损耗
--物理、属性、熟练、技能的伤害曲线尝试错开
--开局随机合成表，纸条对应修改。
--纸条必定提示合成表或者危险、幽灵NPC
--杂兵死亡遗言不提示地点
--增加一个高级杂兵阶级，减少初级杂兵收益，增强高级杂兵和全息的收益以及防御
--头像按系列来整理
--技能标签整理
--隐藏成就系列
--战斗技改成兼容4个以上的
--有时会从大房间跳到小房间
--注册完自动导入教程
--部分imba属性（连击，爆炸）和对应的防御属性区分等级


【ABANDONED】每一个战斗技能都占了一条news类别，就不会复用吗


【农药模式优化】
--地图移动。由程序自动判定当前地图可以移动到哪（8个方向）。
--禁区机制修改。禁区由游戏最外围开始向内螺旋推进。顺带着可以把旧模式的禁区原理一起改了。
--如果有开局不超过10分钟的农药房存在，则只能进已经存在的农药房。换句话说，只有所有农药房都开局超过10分钟了，才能新开。
--说道农药，怎能不团战？结合团战模式与英文版大逃杀的模式：玩家进入房间时随机分配队伍（开局时设置2-5队，错开分配玩家，每队5人上限，人满时游戏停止激活）。每个队伍拥有1名“首领NPC”，攻击面为职人级，防御面为猴子级。队员可以跟首领NPC交换道具，可以全队投票来移动首领NPC。首领NPC会自动换上较强的装备，移动后自动下雷，受伤时以一定速度吃补给。首领NPC被杀，全队失去幸存胜利资格；连斗后其他队伍首领NPC都不存活，则本队获得幸存胜利。解禁、解离、核爆胜利条件不变，不过难度可能增加。


街头霸王：
格挡：0  猛击：0  偷袭：3  灭气：6  全垒：11  百战：18
全垒：替换原闷棍，持殴系武器时消耗90点怒气发动。本次攻击必定触发“猛击”，并额外造成(敌方体力上限-当前体力)的伤害。此外，有10%的概率将敌方（不包括尸体）击飞到另一个非危险区域。可以消耗6个技能点将概率提高到20%，再消耗9个技能点提高到35%。击飞成功时会发进行消息，但不公布击飞地点。你自己则会有提示击飞到的地点。

见敌必斩：
直感：0  解牛：5  舞钢：9   强袭：15  剑切：17  歼灭：21
解牛：取代【剑心】，战斗技，消耗3怒气发动。本次攻击附加(30+等级)点的最终伤害，且本次攻击的武器损耗率减半。
剑切：见敌必斩17级解锁。当你使用斩系武器且应战策略为重视反击时，你有概率抵消敌方射程大于你的攻击（爆系除外）。基础概率为10%，每1点斩熟增加0.1%的概率，对玩家最大为35%，对NPC最大为60%。抵消时，敌方的攻击伤害扣除(你的武器效果值开根号)x10的数值。

狙击鹰眼：
静息：0  破甲：0  瞄准：3  掠夺：8  爆头：特殊  奇袭：15
掠夺：除原掠夺效果外，可以花费5个技能点升级。升级后获得以下效果：你击杀敌人时额外自动拾取对方金钱。（杂兵拾取金钱后，默认选项是销毁尸体）
奇袭：取代咆哮，持远程武器时消耗95点怒气发动。本次攻击必定miss。在对方的反击流程结束后（不论对方是否成功反击），对方受到你的追加攻击，且本次攻击基础命中+15%，物理伤害+20%，属性伤害+80%，防具损坏效果x2。如果你造成了至少3个部位受伤或者防具损伤，本次攻击必定贯穿对方防具。

灌篮高手：
臂力：0  花雨：3  附魔：5  枭眼：9  百出：特殊  对撞：19
潜能：取消
对撞：灌篮高手19级解锁。当你持投系武器且应战策略为重视反击，受到射程大于或等于你的攻击（爆系除外）时，有概率反弹对方的攻击。基础概率为20%，每1投熟增加0.05%的概率，对玩家最大为45%，对NPC最大为75%。被反弹的攻击视为无效，且对方受到被反弹的攻击伤害x1%的伤害（最大400点）。对撞触发后你仍可能反击。

拆弹专家：
潜行：0  谨慎：0  专注：3  高能：6  埋伏：9  聚爆：19
反思：取消，对陷阱的加成放入称号特性里。
埋伏：拆弹专家9级解锁。每在当前地图探索1次可以积累1点埋伏值（最高10点）。你的爆系武器命中率上升埋伏值x1%。攻击后埋伏值下降5点；移动后埋伏值清零。可以花费10个技能点将埋伏值上限提升至15%、攻击后埋伏值下降变为3点。
聚爆：取代双响。在原双响技能基础上，如果埋伏值大于等于10，你的攻击次数额外再+1。

超能力者：
灵力：0  必杀：5  感应：7  充能：11  替身：15  心火：19
感应：超能力者7级解锁。如果灵系是你熟练最高的系而且你的怒气高于85，你的先制率x1.05。可以花费10个技能点升级，升级后先制率x1.1。
替身：超能力者15级解锁。你可以在以下3个状态自由切换。
	近距——没有特殊效果。
	中距——使用灵系武器且怒气不为0，你主动攻击时，射程视为投系，但最终伤害x50%；此状态下每1次移动或探索减少2点怒气。
	远距——使用灵系武器且怒气不为0，你主动攻击时，射程视为重枪，但最终伤害x25%；此状态下每1次移动或探索减少4点怒气。

铁拳无敌：
尊严：0  仁义：2  乱击：5  蓄力：8  格斗：11  决战：19
熟练：取消，效果放入称号特性

根性兄贵
【代偿】9级时解锁。受到的伤害每有200点，自己的生命上限就+1。
【不屈】15级解锁。如果受到的伤害不超过自己最大HP的一半，你不会因为这次伤害而死。这个效果1局游戏可以触发最多2次。
【浴血】21级解锁。战斗技。自己消耗(自己当前HP-对方当前HP)数值的HP（这个值最低300点），本次攻击的物理伤害增加这个数值。一局游戏可以使用最多2次。消耗100点怒气，使用没有任何属性的武器才能发动。

高速成长
【神技】初始解锁。你可以使用技能点换取特定系的熟练度。1技能点=10熟练。
【神影】9级解锁。如果你的所用系熟练比对方所用系熟练高，那么你的先制攻击率+10%，命中率+10%。
【神裁】21级解锁。战斗中，你的所用系熟练每比对方所用系熟练多200，就随机无视1项对方的减半类防御属性。

「重装机兵」
称号特性：可以选择以手中武器或包裹里任何一个武器发动攻击。攻击后会自动装备上那个武器。 
「副炮」5级解锁。可以在技能列表里选择包裹里1个射系/投系武器，你被先制或者被其他玩家主动攻击时，会在战斗中临时装备上这个武器，但是武器视为无属性。NPC拥有这个技能时会根据射程随机切换合适的武器。 
「特弹」7级解锁。战斗技，消耗20点怒气发动。攻击时从包裹里射系/投系武器的攻击属性中随机挑选1个额外生效。 
「装甲」9级解锁。你包裹里防具效果值总和的1/2计入你的防具防御力。 
「武库」13级解锁。包裹里每有1件射系/投系武器，你的物理伤害+2%，可以花费技能点升级，每升1级，这个效果+2%，最高5级。每级升级花费分别为：2 2 3 4 5。 
「迎击」把「武库」技能提升到3级以上解锁。受到致命伤时，可以消耗包裹里1件射系/投系武器，抵消那个武器效果值的伤害。在一局中只能发动最多2次。 
「齐射」21级解锁。战斗技，装备射系/投系武器时消耗99点怒气发动。本次战斗会以包裹里射程不小于装备武器的所有武器进行追加攻击。在一局中只能发动最多2次。

「无限斗士」
称号特性：你的怒气上限为120。初始获得50点殴熟。每次探索/移动，你都获得1点怒气。
「立回」初始解锁。在技能页面设定地点后，你可以通过「立回」按钮在当前地点和目标地点快速来回移动。如果不是通过「立回」进入战斗，并且没有发动战斗技能，你造成的伤害-99%。
「开课」5级解锁。战斗技，消耗10点怒气发动。战斗中你有概率发动追击，每次攻击结束后有15%概率发动追击，但追击的伤害*60%^追击次数。可以消耗7点技能点将追击概率增加到30%。
「精防」7级解锁。你的怒气在60以上并重视反击、空手/殴系武器、受到超过50%HP的伤害时，免疫那次伤害，之后你的怒气减少伤害值/10的数值。
「搬运」11级解锁。战斗技，空手/殴系武器时，消耗40点怒气发动。攻击开始前，你和敌人一起移动到「立回」设置的地点，且移动距离每有1格（游戏地图直线距离），你本次攻击的物理伤害+3%。本次攻击对手无法反击。对NPC发动时，只有30%的成功率。
「让血」15级解锁。你可以通过减少10%的HP上限来永久增加5%的最终伤害。一局游戏最多发动10次。
「关灯」21级解锁。战斗技，消耗110点怒气发动。本次攻击如果命中，强则制结束本次战斗，之后对手获得5秒的「致盲」异常状态（先制率-100%，反击率-50%，视野暂时消失；异常状态消失时，对手受到等于你这次战斗本该造成的伤害）

「偶像歌姬」「偶像」称号特性：开局歌魂上限100，每升1级歌魂上限+3~5点，歌魂回复10%。遭遇你的粉丝时视为队友，你可以送道具给粉丝，粉丝会把随机1个装备/道具交给你。重视防御/重视躲避时不会遭遇你的粉丝。
「歌姬」开局解锁。你唱过的歌不需要装备歌词卡片也能再次吟唱。每次唱歌，会为当前地图你的所有粉丝回复歌词费用数值的HP和SP。
「演唱」3级解锁。战斗技，消耗10点歌魂。本次攻击视为拥有音波属性。此外，如果本次攻击让NPC HP变为0，不会击杀其，而是把其变为你的粉丝（拾取金钱，粉丝HP回满）。「歌狂」5级解锁。你获得的怒气全部转化为歌魂，比率2:1。可以消耗4/8点技能点将比例升为1:1、1:2「余音」7级解锁。你唱歌时的实际歌魂消耗-0%。可以依次消耗5/7/9点技能点升级为-10%/-25%/-50%。
「乐祭」11级解锁。主动技，需要选择歌词并消耗所需歌魂发动，持续秒数为歌词费用数值。持续时间内当前地图每有1名粉丝就降低3%你受到的战斗伤害并提高3%你造成的战斗伤害。（减伤最高为50%）。使用后可以立刻再次使用。「呐喊」17级解锁。战斗技，需要选择歌词并消耗所需歌魂x2发动。本次攻击伤害全部视为音爆属性。并且，本次攻击伤害不会低于歌词费用数值。